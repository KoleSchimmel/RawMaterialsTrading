<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confidential Raw Materials Trading Platform</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div id="app">
        <header class="header">
            <div class="container">
                <h1 class="logo">Confidential Raw Materials Trading</h1>
                <div class="wallet-section">
                    <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>
                    <div id="walletInfo" class="wallet-info hidden">
                        <span id="walletAddress"></span>
                        <button id="disconnectWallet" class="btn btn-secondary">Disconnect</button>
                    </div>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <!-- Loading indicator -->
                <div id="loading" class="loading hidden">
                    <div class="spinner"></div>
                    <p>Processing transaction...</p>
                </div>

                <!-- Navigation tabs -->
                <div class="tabs">
                    <button class="tab-button active" data-tab="materials">Browse Materials</button>
                    <button class="tab-button" data-tab="orders">My Orders</button>
                    <button class="tab-button" data-tab="supplier">Supplier Panel</button>
                    <button class="tab-button" data-tab="admin">Admin Panel</button>
                </div>

                <!-- Browse Materials Tab -->
                <div id="materials" class="tab-content active">
                    <div class="section">
                        <h2>Available Raw Materials</h2>

                        <div class="filters">
                            <select id="categoryFilter">
                                <option value="">All Categories</option>
                                <option value="0">Metals</option>
                                <option value="1">Chemicals</option>
                                <option value="2">Energy</option>
                                <option value="3">Agricultural</option>
                                <option value="4">Textiles</option>
                                <option value="5">Minerals</option>
                            </select>
                            <button id="refreshMaterials" class="btn btn-secondary">Refresh</button>
                        </div>

                        <div id="materialsList" class="materials-grid">
                            <!-- Materials will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- My Orders Tab -->
                <div id="orders" class="tab-content">
                    <div class="section">
                        <h2>My Orders</h2>
                        <div id="ordersList" class="orders-list">
                            <!-- Orders will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Supplier Panel Tab -->
                <div id="supplier" class="tab-content">
                    <div class="section">
                        <h2>List New Material</h2>
                        <form id="listMaterialForm" class="form">
                            <div class="form-group">
                                <label for="materialName">Material Name</label>
                                <input type="text" id="materialName" name="materialName" required>
                            </div>

                            <div class="form-group">
                                <label for="materialCategory">Category</label>
                                <select id="materialCategory" name="materialCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="0">Metals</option>
                                    <option value="1">Chemicals</option>
                                    <option value="2">Energy</option>
                                    <option value="3">Agricultural</option>
                                    <option value="4">Textiles</option>
                                    <option value="5">Minerals</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="quantity">Quantity</label>
                                <input type="number" id="quantity" name="quantity" min="1" required>
                            </div>

                            <div class="form-group">
                                <label for="pricePerUnit">Price Per Unit (Wei)</label>
                                <input type="number" id="pricePerUnit" name="pricePerUnit" min="1" required>
                            </div>

                            <div class="form-group">
                                <label for="minOrder">Minimum Order</label>
                                <input type="number" id="minOrder" name="minOrder" min="1" required>
                            </div>

                            <div class="form-group">
                                <label for="qualityGrade">Quality Grade</label>
                                <input type="text" id="qualityGrade" name="qualityGrade" required>
                            </div>

                            <div class="form-group">
                                <label for="deliveryTimeframe">Delivery Timeframe (days)</label>
                                <input type="number" id="deliveryTimeframe" name="deliveryTimeframe" min="1" required>
                            </div>

                            <button type="submit" class="btn btn-primary">List Material</button>
                        </form>

                        <div class="section">
                            <h3>My Listed Materials</h3>
                            <div id="myMaterialsList" class="materials-grid">
                                <!-- Supplier's materials will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Panel Tab -->
                <div id="admin" class="tab-content">
                    <div class="section">
                        <h2>Admin Functions</h2>

                        <div class="admin-actions">
                            <div class="form-group">
                                <label for="verifySupplierAddress">Verify Supplier</label>
                                <input type="text" id="verifySupplierAddress" placeholder="0x...">
                                <button id="verifySupplierBtn" class="btn btn-primary">Verify Supplier</button>
                            </div>

                            <div class="form-group">
                                <label for="verifyBuyerAddress">Verify Buyer</label>
                                <input type="text" id="verifyBuyerAddress" placeholder="0x...">
                                <button id="verifyBuyerBtn" class="btn btn-primary">Verify Buyer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modal for placing orders -->
        <div id="orderModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Place Order</h3>
                <form id="placeOrderForm" class="form">
                    <input type="hidden" id="orderMaterialId" name="orderMaterialId">

                    <div class="form-group">
                        <label for="orderQuantity">Quantity</label>
                        <input type="number" id="orderQuantity" name="orderQuantity" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="maxPrice">Maximum Price (Wei)</label>
                        <input type="number" id="maxPrice" name="maxPrice" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="deliveryLocation">Delivery Location</label>
                        <input type="text" id="deliveryLocation" name="deliveryLocation" required>
                    </div>

                    <div class="form-group">
                        <label for="specialRequirements">Special Requirements</label>
                        <textarea id="specialRequirements" name="specialRequirements" rows="3"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Place Order</button>
                </form>
            </div>
        </div>

        <!-- Toast notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="contract.js"></script>
    <script src="app.js"></script>
</body>
</html>